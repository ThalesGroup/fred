{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "BLE scan report",
  "description": "Payload sent to the backend to report on scanned tags.",
  "type": "object",
  "properties": {
    "gatewayId": {
      "description": "Unique identifier of the gateway.",
      "type": "string"
    },
    "timestamp": {
      "description": "Timestamp of when this report was generated, number of seconds since the POSIX epoch.",
      "type": "number"
    },
    "detectedTags": {
      "description": "List of BLE tags detected by the gateway.",
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "description": "Unique identifier of the BLE tag.",
            "type": "string"
          },
          "age": {
            "description": "Seconds elapsed between last detection and generation of this report.",
            "type": "number",
            "minimum": 0
          },
          "rssi": {
            "description": "Received signal strength indicator in dBm, higher value means more power.",
            "type": "number",
            "minimum": -127,
            "maximum": 127
          }
        },
        "required": [
          "age",
          "id",
          "rssi"
        ]
      }
    },
    "batteryLevel": {
      "description": "Battery level of the gateway in percent if available.",
      "type": "number",
      "minimum": 0,
      "maximum": 100
    },
    "location": {
      "description": "Last known position of the gateway. If this field is empty this means the gateway hasn't determined its position yet.",
      "type": "object",
      "properties": {
        "timeOfFix": {
          "description": "Timestamp indicating when the last valid fix was obtained, in seconds since POSIX epoch.",
          "type": "number"
        },
        "latitude": {
          "description": "Latitude in decimal degrees.",
          "type": "number",
          "minimum": -90,
          "maximum": 90
        },
        "longitude": {
          "description": "Longitude in decimal degrees.",
          "type": "number",
          "minimum": -180,
          "maximum": 180
        },
        "altitude": {
          "description": "Altitude in meters.",
          "type": "number"
        },
        "heading": {
          "description": "Heading of the horizontal movement in degrees.",
          "type": "number",
          "minimum": 0,
          "maximum": 360
        },
        "horizontalSpeed": {
          "description": "Horizontal speed in meters per second.",
          "type": "number"
        },
        "verticalSpeed": {
          "description": "Vertical speed in meters per second.",
          "type": "number"
        }
      },
      "required": [
        "timeOfFix",
        "latitude",
        "longitude",
        "altitude",
        "heading",
        "horizontalSpeed",
        "verticalSpeed"
      ]
    }
  },
  "required": [
    "gatewayId",
    "timestamp",
    "detectedTags"
  ]
}