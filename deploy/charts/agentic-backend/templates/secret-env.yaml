---
apiVersion: v1
kind: Secret
metadata:
  name: {{ .Chart.Name }}-env
stringData:
  .env: |
    # This file contains the environment variables for the application

    # -----------------------------------------------------------------------------
    # ðŸ”µ AZURE AUTHENTICATION (for getting OAuth token)
    # -----------------------------------------------------------------------------

    AZURE_TENANT_ID={{ .Values.dotenv.AZURE_TENANT_ID | quote }}
    AZURE_CLIENT_ID={{ .Values.dotenv.AZURE_CLIENT_ID | quote }}
    AZURE_CLIENT_SECRET={{ .Values.dotenv.AZURE_CLIENT_SECRET | quote }}
    AZURE_CLIENT_SCOPE={{ .Values.dotenv.AZURE_CLIENT_SCOPE | quote }}

    # -----------------------------------------------------------------------------
    # ðŸ”µ AZURE API SETTINGS
    # -----------------------------------------------------------------------------

    AZURE_API_VERSION={{ .Values.dotenv.AZURE_API_VERSION | quote }}

    # -----------------------------------------------------------------------------
    # ðŸ”µ API GATEWAY (APIM) SETTINGS
    # -----------------------------------------------------------------------------

    AZURE_APIM_BASE_URL={{ .Values.dotenv.AZURE_APIM_BASE_URL | quote }}
    AZURE_RESOURCE_PATH_EMBEDDINGS={{ .Values.dotenv.AZURE_RESOURCE_PATH_EMBEDDINGS | quote }}
    AZURE_RESOURCE_PATH_LLM={{ .Values.dotenv.AZURE_RESOURCE_PATH_LLM | quote }}
    AZURE_APIM_KEY={{ .Values.dotenv.AZURE_APIM_KEY | quote }}

    # -----------------------------------------------------------------------------
    # ðŸ”µ AZURE OPENAI DIRECT SETTINGS (if AZURE_USE_APIM=false)
    # -----------------------------------------------------------------------------

    AZURE_OPENAI_ENDPOINT={{ .Values.dotenv.AZURE_OPENAI_ENDPOINT | quote }}
    AZURE_OPENAI_API_KEY={{ .Values.dotenv.AZURE_OPENAI_API_KEY | quote }}

    # -----------------------------------------------------------------------------
    # ðŸ”µ AZURE OPENAI DEPLOYMENT NAMES
    # -----------------------------------------------------------------------------

    AZURE_DEPLOYMENT_LLM={{ .Values.dotenv.AZURE_DEPLOYMENT_LLM | quote }}
    AZURE_DEPLOYMENT_EMBEDDING={{ .Values.dotenv.AZURE_DEPLOYMENT_EMBEDDING | quote }}

    # -----------------------------------------------------------------------------
    # ðŸ”µ OPENAI EMBEDDING (Public API - NOT Azure)
    # -----------------------------------------------------------------------------

    OPENAI_API_KEY={{ .Values.dotenv.OPENAI_API_KEY | quote }}
    OPENAI_API_BASE={{ .Values.dotenv.OPENAI_API_BASE | quote }}
    OPENAI_API_VERSION={{ .Values.dotenv.OPENAI_API_VERSION | quote }}
    OPENAI_MODEL_NAME={{ .Values.dotenv.OPENAI_MODEL_NAME | quote }}

    # -----------------------------------------------------------------------------
    # ðŸ”µ KEYCLOAK
    # -----------------------------------------------------------------------------

    KEYCLOAK_SERVER_URL={{ .Values.dotenv.KEYCLOAK_SERVER_URL | quote }}
    KEYCLOAK_REALM_NAME={{ .Values.dotenv.KEYCLOAK_REALM_NAME | quote }}
    KEYCLOAK_CLIENT_ID={{ .Values.dotenv.KEYCLOAK_CLIENT_ID | quote }}

    # -----------------------------------------------------------------------------
    # ðŸ”µ LOCAL STORAGE
    # -----------------------------------------------------------------------------

    LOCAL_CONTEXT_STORAGE_PATH={{ .Values.dotenv.LOCAL_CONTEXT_STORAGE_PATH | quote }}
    LOCAL_METADATA_STORAGE_PATH={{ .Values.dotenv.LOCAL_METADATA_STORAGE_PATH | quote }}

    # -----------------------------------------------------------------------------
    # ðŸ”µ OPENSEARCH connection details
    # -----------------------------------------------------------------------------

    OPENSEARCH_USER={{ .Values.dotenv.OPENSEARCH_USER | quote }}
    OPENSEARCH_PASSWORD={{ .Values.dotenv.OPENSEARCH_PASSWORD | quote }}
